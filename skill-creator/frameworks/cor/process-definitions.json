{
  "schema_version": "1.0.0",
  "description": "COR Process Definition Schema",
  "process": {
    "name": "{{SKILL_NAME}}",
    "entry_node": "00-init",
    "nodes": [
      {
        "id": "00-init",
        "name": "Initialize",
        "description": "Initialize the workflow",
        "next": "01-process",
        "exit_validation": "exit-validation.sh",
        "outputs": ["init-output.json"]
      }
    ],
    "transitions": [
      {
        "from": "00-init",
        "to": "01-process",
        "condition": "exit_validation_passed"
      }
    ]
  },
  "node_schema": {
    "type": "object",
    "required": ["id", "name", "description", "exit_validation"],
    "properties": {
      "id": {
        "type": "string",
        "pattern": "^[0-9]{2}-[a-z-]+$"
      },
      "name": {
        "type": "string"
      },
      "description": {
        "type": "string"
      },
      "next": {
        "type": "string",
        "description": "Next node ID, null for final node"
      },
      "exit_validation": {
        "type": "string",
        "default": "exit-validation.sh"
      },
      "outputs": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    }
  },
  "transition_schema": {
    "type": "object",
    "required": ["from", "to", "condition"],
    "properties": {
      "from": {
        "type": "string"
      },
      "to": {
        "type": "string"
      },
      "condition": {
        "type": "string",
        "enum": ["exit_validation_passed", "user_confirmed", "always"]
      }
    }
  }
}
